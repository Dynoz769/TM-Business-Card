<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kartu 360 Derajat</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #f0f5ff;
      padding: 20px;
    }
    
    .container {
      max-width: 500px;
      width: 100%;
      text-align: center;
    }
    
    h1 {
      margin-bottom: 0.5rem;
      color: #333;
    }
    
    p {
      margin-bottom: 1.5rem;
      color: #666;
    }
    
    .upload-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .upload-btn {
      background-color: #4a6cf7;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .upload-btn:hover {
      background-color: #3451c6;
    }
    
    .back-upload-btn {
      background-color: #9c4af7;
    }
    
    .back-upload-btn:hover {
      background-color: #7834c6;
    }
    
    .delete-btn {
      font-size: 12px;
      color: #e74c3c;
      background: none;
      border: none;
      cursor: pointer;
      margin-top: 5px;
    }
    
    .delete-btn:hover {
      text-decoration: underline;
      color: #c0392b;
    }
    
    .card-container {
      position: relative;
      width: 280px;
      height: 400px;
      margin: 0 auto;
      perspective: 1500px;
    }
    
    .card {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      cursor: grab;
    }
    
    .card.grabbing {
      cursor: grabbing;
      transition: none;
    }
    
    .card-side {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 15px;
      overflow: hidden;
    }
    
    .card-front {
      background: linear-gradient(135deg, #4a6cf7, #4a8ef7);
      color: white;
      z-index: 2;
    }
    
    .card-back {
      background: linear-gradient(135deg, #9c4af7, #c74af7);
      color: white;
      transform: rotateY(180deg);
    }
    
    .side-label {
      position: absolute;
      bottom: 15px;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
    }
    
    .card-circle {
      width: 80px;
      height: 80px;
      background-color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .card-letter {
      font-size: 36px;
      font-weight: bold;
    }
    
    .front-letter {
      color: #4a6cf7;
    }
    
    .back-letter {
      color: #9c4af7;
    }
    
    .card-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .card-text {
      font-size: 14px;
      margin-bottom: 20px;
      padding: 0 20px;
      text-align: center;
    }
    
    .image-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 15px;
      overflow: hidden;
    }
    
    .card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .image-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 10px;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
      color: white;
    }
    
    .upload-btn-card {
      background-color: white;
      color: #4a6cf7;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      margin-top: 10px;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .back-btn-card {
      color: #9c4af7;
    }
    
    .controls {
      margin-top: 30px;
    }
    
    .flip-btn {
      background-color: #4a6cf7;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s;
      box-shadow: 0 4px 10px rgba(74, 108, 247, 0.3);
    }
    
    .flip-btn:hover {
      background-color: #3451c6;
    }
    
    .status {
      margin-bottom: 15px;
      font-weight: 500;
    }
    
    .bold {
      font-weight: 700;
    }
    
    .info {
      margin-top: 20px;
      font-size: 12px;
      color: #777;
    }
    
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kartu 360 Derajat</h1>
    <p>Upload gambar untuk kartu dan geser untuk memutar</p>
    
    <div class="upload-container">
      <div>
        <button class="upload-btn" id="frontUploadBtn">Upload Gambar Depan</button>
        <button class="delete-btn hidden" id="frontDeleteBtn">Hapus Gambar</button>
        <input type="file" id="frontFileInput" class="hidden" accept="image/*">
      </div>
      
      <div>
        <button class="upload-btn back-upload-btn" id="backUploadBtn">Upload Gambar Belakang</button>
        <button class="delete-btn hidden" id="backDeleteBtn">Hapus Gambar</button>
        <input type="file" id="backFileInput" class="hidden" accept="image/*">
      </div>
    </div>
    
    <div class="card-container">
      <div class="card" id="card">
        <!-- Front Side -->
        <div class="card-side card-front" id="cardFront">
          <div class="default-front" id="defaultFront">
            <div class="card-circle">
              <div class="card-letter front-letter">D</div>
            </div>
            <div class="card-title">DEPAN</div>
            <div class="card-text">Upload gambar untuk tampilan depan</div>
            <button class="upload-btn-card" id="frontCardBtn">Upload Gambar</button>
          </div>
          <div class="image-container hidden" id="frontImageContainer">
            <img id="frontCardImage" class="card-image" src="gambardepan.jpeg" alt="Gambar Depan">
            <div class="image-overlay">
              <div class="side-label">DEPAN</div>
            </div>
          </div>
        </div>
        
        <!-- Back Side -->
        <div class="card-side card-back" id="cardBack">
          <div class="default-back" id="defaultBack">
            <div class="card-circle">
              <div class="card-letter back-letter">B</div>
            </div>
            <div class="card-title">BELAKANG</div>
            <div class="card-text">Upload gambar untuk tampilan belakang</div>
            <button class="upload-btn-card back-btn-card" id="backCardBtn">Upload Gambar</button>
          </div>
          <div class="image-container hidden" id="backImageContainer">
            <img id="backCardImage" class="card-image" src="gambarbelakang.jpeg" alt="Gambar Belakang">
            <div class="image-overlay">
              <div class="side-label">BELAKANG</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="controls">
      <div class="status">
        Anda sedang melihat sisi: <span class="bold" id="currentSide">DEPAN</span>
      </div>
      <button class="flip-btn" id="flipBtn">Balik Kartu</button>
    </div>
    
    <p class="info">
      Gambar yang diupload akan tersimpan di browser anda dan akan tetap ada meskipun halaman dimuat ulang
    </p>
  </div>
  
  <script>
    // DOM Elements
    const card = document.getElementById('card');
    const cardFront = document.getElementById('cardFront');
    const cardBack = document.getElementById('cardBack');
    const frontUploadBtn = document.getElementById('frontUploadBtn');
    const backUploadBtn = document.getElementById('backUploadBtn');
    const frontFileInput = document.getElementById('frontFileInput');
    const backFileInput = document.getElementById('backFileInput');
    const frontCardBtn = document.getElementById('frontCardBtn');
    const backCardBtn = document.getElementById('backCardBtn');
    const flipBtn = document.getElementById('flipBtn');
    const currentSide = document.getElementById('currentSide');
    const frontCardImage = document.getElementById('frontCardImage');
    const backCardImage = document.getElementById('backCardImage');
    const frontImageContainer = document.getElementById('frontImageContainer');
    const backImageContainer = document.getElementById('backImageContainer');
    const defaultFront = document.getElementById('defaultFront');
    const defaultBack = document.getElementById('defaultBack');
    const frontDeleteBtn = document.getElementById('frontDeleteBtn');
    const backDeleteBtn = document.getElementById('backDeleteBtn');
    
    // Card state
    let rotationY = 0;
    let isDragging = false;
    let startX = 0;
    let isShowingFront = true;
    
    // Initialize the app
    function init() {
      // Load saved images
      loadSavedImages();
      
      // Event listeners for buttons
      frontUploadBtn.addEventListener('click', () => frontFileInput.click());
      backUploadBtn.addEventListener('click', () => backFileInput.click());
      frontCardBtn.addEventListener('click', () => frontFileInput.click());
      backCardBtn.addEventListener('click', () => backFileInput.click());
      flipBtn.addEventListener('click', flipCard);
      
      // File inputs change event
      frontFileInput.addEventListener('change', handleFrontImageUpload);
      backFileInput.addEventListener('change', handleBackImageUpload);
      
      // Delete buttons
      frontDeleteBtn.addEventListener('click', clearFrontImage);
      backDeleteBtn.addEventListener('click', clearBackImage);
      
      // Card dragging events
      card.addEventListener('mousedown', handleMouseDown);
      document.addEventListener('mouseup', handleMouseUp);
      document.addEventListener('mousemove', handleMouseMove);
      
      // Touch events for mobile
      card.addEventListener('touchstart', handleTouchStart);
      document.addEventListener('touchend', handleTouchEnd);
      document.addEventListener('touchmove', handleTouchMove);
    }
    
    // Load saved images from localStorage
    function loadSavedImages() {
      const savedFrontImage = localStorage.getItem('frontCardImage');
      const savedBackImage = localStorage.getItem('backCardImage');
      
      if (savedFrontImage) {
        frontCardImage.src = savedFrontImage;
        frontImageContainer.classList.remove('hidden');
        defaultFront.classList.add('hidden');
        frontDeleteBtn.classList.remove('hidden');
        frontUploadBtn.textContent = 'Tukar Gambar Depan';
      }
      
      if (savedBackImage) {
        backCardImage.src = savedBackImage;
        backImageContainer.classList.remove('hidden');
        defaultBack.classList.add('hidden');
        backDeleteBtn.classList.remove('hidden');
        backUploadBtn.textContent = 'Tukar Gambar Belakang';
      }
    }
    
    // Handle front image upload
    function handleFrontImageUpload(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const imageData = event.target.result;
          frontCardImage.src = imageData;
          frontImageContainer.classList.remove('hidden');
          defaultFront.classList.add('hidden');
          frontDeleteBtn.classList.remove('hidden');
          frontUploadBtn.textContent = 'Tukar Gambar Depan';
          
          // Save to localStorage
          localStorage.setItem('frontCardImage', imageData);
        };
        reader.readAsDataURL(file);
      }
    }
    
    // Handle back image upload
    function handleBackImageUpload(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const imageData = event.target.result;
          backCardImage.src = imageData;
          backImageContainer.classList.remove('hidden');
          defaultBack.classList.add('hidden');
          backDeleteBtn.classList.remove('hidden');
          backUploadBtn.textContent = 'Tukar Gambar Belakang';
          
          // Save to localStorage
          localStorage.setItem('backCardImage', imageData);
        };
        reader.readAsDataURL(file);
      }
    }
    
    // Clear front image
    function clearFrontImage() {
      frontCardImage.src = '';
      frontImageContainer.classList.add('hidden');
      defaultFront.classList.remove('hidden');
      frontDeleteBtn.classList.add('hidden');
      frontUploadBtn.textContent = 'Upload Gambar Depan';
      
      // Remove from localStorage
      localStorage.removeItem('frontCardImage');
    }
    
    // Clear back image
    function clearBackImage() {
      backCardImage.src = '';
      backImageContainer.classList.add('hidden');
      defaultBack.classList.remove('hidden');
      backDeleteBtn.classList.add('hidden');
      backUploadBtn.textContent = 'Upload Gambar Belakang';
      
      // Remove from localStorage
      localStorage.removeItem('backCardImage');
    }
    
    // Handle mouse down
    function handleMouseDown(e) {
      e.preventDefault();
      isDragging = true;
      startX = e.clientX || e.touches[0].clientX;
      card.classList.add('grabbing');
    }
    
    // Handle touch start
    function handleTouchStart(e) {
      isDragging = true;
      startX = e.touches[0].clientX;
      card.classList.add('grabbing');
    }
    
    // Handle mouse move
    function handleMouseMove(e) {
      if (!isDragging) return;
      
      const currentX = e.clientX || e.touches[0].clientX;
      const deltaX = currentX - startX;
      
      // Calculate new rotation, limit to front (0/360) or back (180)
      let newRotation = rotationY + deltaX * 0.5;
      
      // Update card rotation
      updateCardRotation(newRotation);
      
      // Update start position
      startX = currentX;
    }
    
    // Handle touch move
    function handleTouchMove(e) {
      if (!isDragging) return;
      handleMouseMove(e);
    }
    
    // Handle mouse up/touch end
    function handleMouseUp() {
      if (!isDragging) return;
      isDragging = false;
      card.classList.remove('grabbing');
      
      // Snap to either front (0) or back (180)
      snapToSide();
    }
    
    // Handle touch end
    function handleTouchEnd() {
      handleMouseUp();
    }
    
    // Snap card to front or back side
    function snapToSide() {
      const normalizedRotation = ((rotationY % 360) + 360) % 360;
      
      if (normalizedRotation < 90 || normalizedRotation > 270) {
        // Snap to front
        rotationY = Math.round(rotationY / 360) * 360;
        isShowingFront = true;
        currentSide.textContent = 'DEPAN';
      } else {
        // Snap to back
        rotationY = Math.round((rotationY - 180) / 360) * 360 + 180;
        isShowingFront = false;
        currentSide.textContent = 'BELAKANG';
      }
      
      updateCardRotation(rotationY, true);
    }
    
    // Flip card function
    function flipCard() {
      if (isShowingFront) {
        rotationY += 180;
        isShowingFront = false;
        currentSide.textContent = 'BELAKANG';
      } else {
        rotationY -= 180;
        isShowingFront = true;
        currentSide.textContent = 'DEPAN';
      }
      
      updateCardRotation(rotationY, true);
    }
    
    // Update card rotation
    function updateCardRotation(newRotation, animate = false) {
      rotationY = newRotation;
      
      // If animate is false, remove transition temporarily
      if (!animate) {
        card.style.transition = 'none';
      } else {
        card.style.transition = 'transform 0.6s ease';
      }
      
      // Apply rotation
      card.style.transform = `rotateY(${rotationY}deg)`;
      
      // Update side indicator
      const normalizedRotation = ((rotationY % 360) + 360) % 360;
      if (normalizedRotation < 90 || normalizedRotation > 270) {
        isShowingFront = true;
        currentSide.textContent = 'DEPAN';
      } else {
        isShowingFront = false;
        currentSide.textContent = 'BELAKANG';
      }
    }
    
    // Start the app
    init();
  </script>
</body>
</html>
